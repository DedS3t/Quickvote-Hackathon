{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport auth from \"../backend_interactions/AuthManager\";\nimport { Input } from \"@rneui/themed\";\nimport LogoVertical from \"../components/LogoVertical\";\nimport FontText from \"../components/FontText\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default (function (_ref) {\n  var navigation = _ref.navigation;\n  if (auth.isAuthed()) navigation.navigate(\"App\");\n\n  var _useState = useState(\"Signup\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      type = _useState2[0],\n      setType = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pass = _useState6[0],\n      setPass = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      ssn = _useState8[0],\n      setSsn = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      error = _useState10[0],\n      setError = _useState10[1];\n\n  var signup = function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setError(\"\");\n            if (email.length < 4) setError(\"Invalid email\");\n            if (pass.length < 6) setError(\"Password must be at least 6 characters\");\n            if (ssn.length != 9) setError(\"Invalid SSN\");\n\n            if (!(error.length > 0)) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(auth.CreateAccount(ssn, email, pass));\n\n          case 8:\n            if (!_context.sent) {\n              _context.next = 18;\n              break;\n            }\n\n            _context.next = 11;\n            return _regeneratorRuntime.awrap(auth.Login(email, pass));\n\n          case 11:\n            if (!_context.sent) {\n              _context.next = 15;\n              break;\n            }\n\n            navigation.navigate(\"App\");\n            _context.next = 16;\n            break;\n\n          case 15:\n            setError(\"Failed Authenticating Login\");\n\n          case 16:\n            _context.next = 19;\n            break;\n\n          case 18:\n            setError(\"Failed Creating Account\");\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var login = function _callee2() {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setError(\"\");\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(auth.Login(email, pass));\n\n          case 3:\n            if (!_context2.sent) {\n              _context2.next = 7;\n              break;\n            }\n\n            navigation.navigate(\"App\");\n            _context2.next = 8;\n            break;\n\n          case 7:\n            setError(\"Invalid Credentials\");\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsx(ImageBackground, {\n    source: require(\"../assets/bg_imgs/homescreen.png\"),\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    resizeMode: \"cover\",\n    opacity: 0.3,\n    children: _jsxs(View, {\n      style: {\n        flex: 1,\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      children: [_jsx(LogoVertical, {\n        style: {\n          marginBottom: 20\n        }\n      }), _jsx(Text, {\n        style: {\n          fontSize: 30,\n          marginBottom: 50\n        },\n        children: type\n      }), error.length > 0 && _jsx(Text, {\n        style: {\n          color: \"red\"\n        },\n        children: error\n      }), _jsx(Input, {\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        label: \"Email\",\n        value: email,\n        labelStyle: {\n          color: \"black\"\n        },\n        onChangeText: function onChangeText(newEmail) {\n          return setEmail(newEmail);\n        }\n      }), _jsx(Input, {\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        secureTextEntry: true,\n        label: \"Password\",\n        value: pass,\n        labelStyle: {\n          color: \"black\"\n        },\n        onChangeText: function onChangeText(newPass) {\n          return setPass(newPass);\n        }\n      }), type == \"Signup\" && _jsx(Input, {\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        label: \"SSN\",\n        value: ssn,\n        labelStyle: {\n          color: \"black\"\n        },\n        onChangeText: function onChangeText(newSsn) {\n          return setSsn(newSsn);\n        }\n      }), _jsx(TouchableOpacity, {\n        onPress: type == \"Signup\" ? signup : login,\n        style: {\n          backgroundColor: \"rgba(8,14,44,0.8)\",\n          paddingHorizontal: 100,\n          paddingVertical: 12,\n          borderRadius: 50\n        },\n        children: _jsx(FontText, {\n          style: {\n            color: \"white\",\n            fontSize: 20\n          },\n          children: type\n        })\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return setType(type == \"Signup\" ? \"Login\" : \"Signup\");\n        },\n        children: _jsx(Text, {\n          style: {\n            marginTop: 20,\n            fontSize: 15\n          },\n          children: type == \"Signup\" ? \"Already have an account? Login!\" : \"Don't have an account? Signup!\"\n        })\n      })]\n    })\n  });\n});","map":{"version":3,"names":["useState","auth","Input","LogoVertical","FontText","navigation","isAuthed","navigate","type","setType","email","setEmail","pass","setPass","ssn","setSsn","error","setError","signup","length","CreateAccount","Login","login","require","width","height","flex","justifyContent","alignItems","marginBottom","fontSize","color","newEmail","newPass","newSsn","backgroundColor","paddingHorizontal","paddingVertical","borderRadius","marginTop"],"sources":["/home/deds3t/Desktop/coding/quickvote/screens/Auth.js"],"sourcesContent":["import { useState } from \"react\";\nimport { View, TouchableOpacity, Text, ImageBackground } from \"react-native\";\nimport auth from \"../backend_interactions/AuthManager\";\nimport { Input } from \"@rneui/themed\";\nimport LogoVertical from \"../components/LogoVertical\";\nimport FontText from \"../components/FontText\";\n\nexport default ({ navigation }) => {\n  if (auth.isAuthed()) navigation.navigate(\"App\");\n\n  let [type, setType] = useState(\"Signup\");\n\n  let [email, setEmail] = useState(\"\");\n  let [pass, setPass] = useState(\"\");\n  let [ssn, setSsn] = useState(\"\");\n  let [error, setError] = useState(\"\");\n\n  let signup = async () => {\n    setError(\"\");\n\n    if (email.length < 4) setError(\"Invalid email\");\n    if (pass.length < 6) setError(\"Password must be at least 6 characters\");\n    if (ssn.length != 9) setError(\"Invalid SSN\");\n\n    if (error.length > 0) return;\n\n    if (await auth.CreateAccount(ssn, email, pass)) {\n      if (await auth.Login(email, pass)) navigation.navigate(\"App\");\n      else setError(\"Failed Authenticating Login\");\n    } else {\n      setError(\"Failed Creating Account\");\n    }\n  };\n\n  let login = async () => {\n    setError(\"\");\n\n    if (await auth.Login(email, pass)) navigation.navigate(\"App\");\n    else setError(\"Invalid Credentials\");\n  };\n\n  return (\n    <ImageBackground\n      source={require(\"../assets/bg_imgs/homescreen.png\")}\n      style={{ width: \"100%\", height: \"100%\" }}\n      resizeMode={\"cover\"}\n      opacity={0.3}\n    >\n      <View style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\" }}>\n        <LogoVertical style={{ marginBottom: 20 }} />\n\n        <Text style={{ fontSize: 30, marginBottom: 50 }}>{type}</Text>\n\n        {error.length > 0 && <Text style={{ color: \"red\" }}>{error}</Text>}\n\n        <Input\n          autoCapitalize=\"none\"\n          autoCorrect={false}\n          label=\"Email\"\n          value={email}\n          labelStyle={{ color: \"black\" }}\n          onChangeText={(newEmail) => setEmail(newEmail)}\n        />\n\n        <Input\n          autoCapitalize=\"none\"\n          autoCorrect={false}\n          secureTextEntry\n          label=\"Password\"\n          value={pass}\n          labelStyle={{ color: \"black\" }}\n          onChangeText={(newPass) => setPass(newPass)}\n        />\n\n        {type == \"Signup\" && (\n          <Input\n            autoCapitalize=\"none\"\n            autoCorrect={false}\n            label=\"SSN\"\n            value={ssn}\n            labelStyle={{ color: \"black\" }}\n            onChangeText={(newSsn) => setSsn(newSsn)}\n          />\n        )}\n\n        <TouchableOpacity\n          onPress={type == \"Signup\" ? signup : login}\n          style={{\n            backgroundColor: \"rgba(8,14,44,0.8)\",\n            paddingHorizontal: 100,\n            paddingVertical: 12,\n            borderRadius: 50,\n          }}\n        >\n          <FontText style={{ color: \"white\", fontSize: 20 }}>{type}</FontText>\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          onPress={() => setType(type == \"Signup\" ? \"Login\" : \"Signup\")}\n        >\n          <Text style={{ marginTop: 20, fontSize: 15 }}>\n            {type == \"Signup\"\n              ? \"Already have an account? Login!\"\n              : \"Don't have an account? Signup!\"}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </ImageBackground>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}